// Generated by CoffeeScript 1.9.0
(function() {
  window.AutoHUD = {
    pollTime: 5000,
    init: function(params) {
      if (params.version == null) {
        window.location.reload();
      } else {
        this.version = params.version;
      }
      this.fetchData();
      return setInterval((function(_this) {
        return function() {
          return _this.fetchData();
        };
      })(this), this.pollTime);
    },
    fetchData: function() {
      return $.ajax("/data", {
        type: "GET",
        success: (function(_this) {
          return function(data) {
            return _this.parseData(data);
          };
        })(this),
        error: (function(_this) {
          return function() {
            return console.log("no response");
          };
        })(this)
      });
    },
    parseData: function(data) {
      if (data.version == null) {
        return;
      }
      if (data.version !== this.version) {
        window.location.reload();
        return;
      }
      return console.log(data);
    }
  };

}).call(this);
